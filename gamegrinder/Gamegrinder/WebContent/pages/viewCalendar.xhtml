<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"> 

	<f:event type="preRenderView" listener="#{calendarDisplay.loadGames}"/>
	<ui:composition template="/templates/common.xhtml">
			<ui:define name="pageTitle">Test title</ui:define>
			<ui:define name="pageHeader">
				<table width="100%" cellspacing="10" cellpadding="0" border="1">
					<tr>
						<td bgcolor="#FFFFFF">Par Date</td>
						<td onclick="document.location.href='viewSetting.jsf';return true;">Par Chronique</td>
					</tr>
				</table>
			</ui:define>
			<ui:define name="body">
			  <f:verbatim>
			  <script>
			  <!--

				function displayDateDetails(day, month) {
					closeDetails();
					var detailsPanel = document.getElementById('dayDetailsPanel_' + day + '_' + month);
					if (detailsPanel != null) {
						detailsPanel.style.display = 'block';
					} 
				} 

			  	function closeDetails() {
				  	var detailPanels = document.getElementsByClassName('dayDetailsPanel');
				  	for(var i=0; i<detailPanels.length;i++) {
					  	detailPanels[i].style.display = 'none';
					}
				}
			  
			  -->
			  </script>
			  </f:verbatim>
			  <h:form id="topForm">
			  JSF:
			  <h:messages />
			  <br/>
			  Rich: <rich:messages/>
			  <rich:dataGrid value="#{calendarDisplay.monthsList}" var="month" columns="#{calendarDisplay.monthsList.size()}" elements="#{calendarDisplay.monthsList.size()}" width="100%"
			  styleClass="calendarMonthPanel">
			  	<rich:panel bodyClass="nopad" >
			  		<f:facet name="header">
						<h:outputFormat value="#{month}" >
							<f:convertDateTime pattern="MMMM"/>
						</h:outputFormat>
			  		</f:facet>
			  		<rich:dataTable var="day" value="#{calendarDisplay.months.get(month)}" width="150"
			  		rowClasses="#{calendarDisplay.getMonthStyleClasses(month)}">
			  			<rich:column style="padding: 0px;">
					 	  <a4j:commandLink action="#{calendarDisplay.startEditDay()}" styleClass="quietLink" render="@form">
					 	  	<f:setPropertyActionListener target="#{calendarDisplay.currentDate}" value="#{day.date}"/>
					 	  	<h:panelGrid columns="3"  border="0" cellpadding="0" cellspacing="0" width="100%">
					 	    	<rich:panel styleClass="calendarDayCell" style="width: 30px;background-color:inherit;">#{day.dayLetter}
					 	    	</rich:panel>
					 	    	<rich:panel styleClass="calendarDayCell" style="width: 30px;background-color:inherit;">#{day.dayNumber}</rich:panel>
					 	    	<rich:panel styleClass="calendarDayCell" style="width: 100px;background-color:inherit;">
					 	    		<h:outputText value="#{day.games}" />
					 	    	</rich:panel>
					 	  	</h:panelGrid>
					 	    	<rich:tooltip>
		 	    					Date: <h:outputText value="#{day.date}" >
		 	    						<f:convertDateTime pattern="E dd MMMM yyyy"/>
		 	    					</h:outputText>
	 	    					<br/>
					 	    	</rich:tooltip>
					 	  </a4j:commandLink>
			  			</rich:column>
			  		</rich:dataTable>
			  	</rich:panel>
			  </rich:dataGrid>
			  </h:form>
			</ui:define>
	</ui:composition>
</html>